version: "3.8"

services:
  fbn_webhook:
    build: ./
    image: smart_auto_api:latest
    ports:
      - 8080:8080
    environment:
      - NODE_ENV=staging
      - PORT=8080
      - API_VERSION=1.0.0
      - LOG_LEVEL=
      - MONGODB_URI=mongodb://root:password@localhost/smart_auto_api_staging
      - MONGODB_PASSWORD=password
      - JWT_SECRET=secret
      - JWT_ALGO=HS256
      - JWT_EXPIRES_IN="10 minutes"
      - EMAIL_USERNAME=
      - EMAIL_PASSWORD=
      - EMAIL_HOST=
      - EMAIL_PORT=
      - AUTH_USER=AUTH_USER=
      - CLIENT_ID=CLIENT_ID=
      - CLIENT_SECRET=
      - REDIRECT_URI=
      - REFRESH_TOKEN=
      - AGENDA_DB_COLLECTION=
      - AGENDA_POOL_TIME=
      - AGENDA_CONCURRENCY=
    depends_on:
      - db

  # docker run -it --rm -p 27017:27017 --name mongodb -v ~/projects/local_mongo/data/db:/data/db mongo
  db:
    image: mongo
    container_name: db
    restart: always
    environment:
      MONGO_INITDB_ROOT_USERNAME: root
      MONGO_INITDB_ROOT_PASSWORD: password
